{%- macro wps_constant(python_url) -%}
    {%- set constant_page = query(
        'SELECT * WHERE {
            ?constant_iri
                :about ?python_iri ;
                :name ?name ;
                octa:url ?url .

            # ?violation_iri octa:isChildOf / octa:isChildOf ?wps_version .
            # ?constant_iri octa:isChildOf / octa:isChildOf ?wps_version .
        }',
        python_iri=URIRef(python_url + '/'),
        violation_iri=URIRef(page.iri + '/')
    ).first -%}

    [{{ constant_page.name }}]({{ constant_page.url }})
{%- endmacro -%}


{%- macro wps_config(url) -%}
    {%- set param = query('SELECT * WHERE {
        ?page
            :about ?parameter ;
            :name ?name ;
            :value ?value ;
            octa:url ?url .
    }', parameter=URIRef(url + '/')).first -%}

    [{{ param.name }}]({{ param.url }}) = `{{ param.value }}`
{%- endmacro -%}


{%- macro wps_violation(internal_name) -%}
    {%- set description = query(
        'SELECT * WHERE {
            ?violation
                :internalName ?name ;
                :code ?code ;
                octa:title ?title ;
                octa:url ?url .
        }',
        name=Literal(internal_name)
    ).first -%}

    {%- if description -%}
        [**WPS{{ description.code }}** {{ description.title }}]({{ description.url }})
    {%- else -%}
        [DATA EXPUNGED]
    {%- endif -%}
{%- endmacro -%}
